# CAN Swarm Environment Configuration

# ========================================
# CORE SETTINGS
# ========================================

# Swarm Identity
SWARM_ID=swarm-001
NODE_ID=node-${HOSTNAME}

# ========================================
# MESSAGE BUS CONFIGURATION
# ========================================

# NATS Configuration (Legacy/Fallback)
NATS_URL=nats://127.0.0.1:4222
SWARM_STREAM=THREADS
SWARM_SUBJECTS=thread.*.*

# ========================================
# P2P CONFIGURATION (Phase 13)
# ========================================

# Enable P2P transport layer
P2P_ENABLED=true

# Use P2P as primary transport (true) or fallback (false)
P2P_PRIMARY=true

# Enable NATS as fallback when P2P is primary
NATS_FALLBACK=true

# P2P Node Listen Address
P2P_LISTEN_ADDR=/ip4/0.0.0.0/tcp/4001

# P2P Bootstrap Nodes (comma-separated multiaddrs)
# P2P_BOOTSTRAP_NODES=/ip4/1.2.3.4/tcp/4001/p2p/QmBootstrapPeer1,/ip4/5.6.7.8/tcp/4001/p2p/QmBootstrapPeer2

# Enable mDNS for local peer discovery
P2P_MDNS_ENABLED=true

# Enable DHT for distributed peer discovery
P2P_DHT_ENABLED=true

# Connection Pool Settings
P2P_MAX_CONNECTIONS=100
P2P_CONNECTION_TIMEOUT=30

# Circuit Relay for NAT Traversal
P2P_CIRCUIT_RELAY_ENABLED=true

# ========================================
# STORAGE CONFIGURATION
# ========================================

# SQLite Database
PLAN_DB_PATH=./plan.db

# Content-Addressed Storage
CAS_DIR=./.cas

# IPFS Configuration (Phase 12)
IPFS_CAS=false
IPFS_HOST=localhost
IPFS_PORT=5001

# ========================================
# POLICY CONFIGURATION
# ========================================

# Policy Engine
POLICY_ENGINE=wasm
POLICY_DIR=./policies

# Gas Metering
WASM_GAS_LIMIT=1000000

# ========================================
# ECONOMICS CONFIGURATION
# ========================================

# Staking and Verification
MIN_VERIFIER_STAKE=100
CHALLENGE_BOND=10
CHALLENGE_REWARD=5

# Auction Settings
AUCTION_TIMEOUT=30
BID_TIMEOUT=10

# ========================================
# PLAN STORE (Automerge CRDT)
# ========================================

# Automerge Configuration
AUTOMERGE_SYNC_ENABLED=true
AUTOMERGE_SNAPSHOT_INTERVAL=100

# ========================================
# SECURITY
# ========================================

# Cryptographic Keys (use vault or secrets manager in production)
# SIGNING_KEY_PATH=./keys/signing.key
# ENCRYPTION_KEY_PATH=./keys/encryption.key

# ========================================
# OBSERVABILITY
# ========================================

# Logging
LOG_LEVEL=INFO
AUDIT_LOG_PATH=./logs/audit.log

# Metrics
METRICS_ENABLED=false
METRICS_PORT=9090

# Tracing
TRACING_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# ========================================
# DEVELOPMENT
# ========================================

# Development Mode (relaxed validation, verbose logging)
DEV_MODE=false

# Test Mode (in-memory storage, mock services)
TEST_MODE=false
